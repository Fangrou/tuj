package org.talend.mdm.impl;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.talend.mdm.modules.Record;
import org.testng.Assert;

public class RecordImplComplexTypes extends Record{
	 String OperationType,key,source;
	 boolean result;
  
	public RecordImplComplexTypes(WebDriver driver) {
		super(driver);
		this.driver = driver;
	}

	public void createRecordAllFieldImpl(String container,String modle,String entity,String IdValue) {
	        OperationType="CREATE";
	        source="genericUI";
			chooseContainer(container);	
			chooseModle(modle);
			clickSave();
			chooseEntity(entity);
			this.sleepCertainTime(3000);
			this.clickCreateRecord();			
			this.sleepCertainTime(3000);
			this.clickElementByXpath("//div[text()='son1']//ancestor::tr//img");			
			 this.typeTextByName("ComplexTypes/son1/Name", "sonName");
			 this.typeTextByName("ComplexTypes/son1/Address", "sonAddress");			 
			 this.typeTextByName("ComplexTypes/son1/School", "sonSchool");			
			 this.clickElementByXpath("//div[text()='father1']//ancestor::tr//img[contains(@style,'background')]");				
			 this.typeTextByName("ComplexTypes/father1/Name", "fatherName");
			 this.typeTextByName("ComplexTypes/father1/Address", "fatherAddress");			
		  this.clickElementByXpath(locator.getString("xpath.record.choose.create.input.save"));
		  chooseRcord(entity,"key",IdValue);
		  this.clickElementByXpath("//div[text()='son1']//ancestor::tr//img");	
		  this.clickElementByXpath("//div[text()='father1']//ancestor::tr//img[contains(@style,'background')]");	
		  Assert.assertEquals(this.getValueInput(By.name("ComplexTypes/son1/Name")),  "sonName");
		  Assert.assertEquals(this.getValueInput(By.name("ComplexTypes/son1/Address")), "sonAddress");
		  Assert.assertEquals(this.getValueInput(By.name("ComplexTypes/son1/School")), "sonSchool");
		  Assert.assertEquals(this.getValueInput(By.name("ComplexTypes/father1/Name")), "fatherName");
		  Assert.assertEquals(this.getValueInput(By.name("ComplexTypes/father1/Address")), "fatherAddress");
		  openJournal(entity,IdValue,OperationType,source);
		  JournalResultCount();
}
	public void createRecordSomeFieldImpl(String container,String modle,String entity) {
		   OperationType="CREATE";
	        source="genericUI";
			chooseContainer(container);	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           
			chooseModle(modle);
			clickSave();
			chooseEntity(entity);
			this.sleepCertainTime(3000);
			this.clickCreateRecord();			
			this.sleepCertainTime(3000);
			this.clickElementByXpath("//div[text()='son1']//ancestor::tr//img");			
			this.typeTextByName("ComplexTypes/son1/Name", "sonName");
			this.typeTextByName("ComplexTypes/son1/Address", "sonAddress");			 
			this.typeTextByName("ComplexTypes/son1/School", "sonSchool");			
		    this.clickElementByXpath(locator.getString("xpath.record.choose.create.input.save"));
		    this.sleepCertainTime(10000);		 
	  Assert.assertTrue(this.isElementPresent(By.xpath("//span[contains(text(),'Unable to save item ComplexTypes')]"), WAIT_TIME_MIN));
 	 
	
}
	
	public void testCreateRecordAddMultipleFieldImpl(String container,String modle,String entity,String IdValue) {
        OperationType="CREATE";
        source="genericUI";
		chooseContainer(container);	
		chooseModle(modle);
		clickSave();
		chooseEntity(entity);
		this.sleepCertainTime(3000);
		this.clickCreateRecord();			
		this.sleepCertainTime(3000);
		this.clickElementByXpath("//div[text()='son1']//ancestor::tr//img");			
		  this.typeTextByName("ComplexTypes/son1/Name", "sonName");
		  this.typeTextByName("ComplexTypes/son1/Address", "sonAddress");
	      this.clickElementByXpath("//input[@name='ComplexTypes/son1/Address']//ancestor::tr//img[@id='Add']");
	      this.sleepCertainTime(2000);
	      this.typeTextByXpath("//div[contains(@id,'TreeDetail-tree')]/div[2]/div/div[3]/div/div[3]//input", "sonAddressAdd");
		  this.typeTextByName("ComplexTypes/son1/School", "sonSchool");			
		  
		  ///////////////////////////////////////////////
		  this.clickElementByXpath("//div[text()='father1']//ancestor::tr//img[contains(@style,'background')]");				
		  this.typeTextByName("ComplexTypes/father1/Name", "fatherName");
		  this.typeTextByName("ComplexTypes/father1/Address", "fatherAddress");			
		  this.clickElementByXpath(locator.getString("xpath.record.choose.create.input.save"));
		  
		  
		  //assert
		  chooseRcord(entity,"key",IdValue);
		  this.clickElementByXpath("//div[text()='son1']//ancestor::tr//img");	
		  this.clickElementByXpath("//div[text()='father1']//ancestor::tr//img[contains(@style,'background')]");	
		  Assert.assertEquals(this.getValueInput(By.name("ComplexTypes/son1/Name")),  "sonName");
		  Assert.assertEquals(this.getValueInput(By.name("ComplexTypes/son1/Address")), "sonAddress");
		  Assert.assertEquals(this.getValueInput(By.xpath("//div[contains(@id,'TreeDetail-tree')]/div[2]/div/div[3]/div/div[3]//input")), "sonAddressAdd");
		  
		  Assert.assertEquals(this.getValueInput(By.name("ComplexTypes/son1/School")), "sonSchool");
		  Assert.assertEquals(this.getValueInput(By.name("ComplexTypes/father1/Name")), "fatherName");
		  Assert.assertEquals(this.getValueInput(By.name("ComplexTypes/father1/Address")), "fatherAddress");
		  openJournal(entity,IdValue,OperationType,source);
		  JournalResultCount();
    }
}
