<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher Standard Edition 8.0.5337.0">
    <meta name="TEMPLATEBASE" content="Dynamic HTML">
    <meta name="LASTUPDATED" content="10/04/10 19:25:50">
    <title>Scenario: Doing a fuzzy match on two columns and outputting the main and rejected data</title>
  </head>

  <body link="#3366CC" vlink="#9999CC" text="#000000" alink="#0000CC" bgcolor="#FFFFFF">

    <!--table width="220" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tFuzzyJoin_Prop.html"><img id="LongDescNotReq1" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="tFuzzyMatch_Prop.html"><img id="LongDescNotReq2" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->

    <!--img src="images/wwplogo.gif" width="122" height="63" alt="Put your logo here!">
    <hr align="left"-->

    <blockquote>
<a name="wp3490875"> </a><div style="color: #000000; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp3490882"> </a><h2 class="pHeading2">
Scenario: Doing a fuzzy match on two columns and outputting the main and rejected data
</h2>
<a name="wp3490889"> </a><p class="pIndented1">
This java scenario describes a five-component Job aiming at: first checking the edit distance between the <em class="cEmphasis">IdClient</em> column of an input file against the data of the reference input file, and second checking all emails by their pronunciation in the <em class="cEmphasis">Email</em> column against the data of the reference input file. The outputs of these two matching types are written in two separate files.
</p>
<a name="wp3490902"> </a><p class="pIndented1">
In this scenario, we have already stored the input schemas of the input and reference files in the Repository. For more information about storing schema metadata in the <b class="cBold">Repository</b> tree view, see <em class="cEmphasis">Setting up a File Delimited schema</em> and <em class="cEmphasis">How to drop components from the Metadata node</em> in <b class="cBold">Talend Integration Suite Studio</b> <b class="cBold">User Guide</b>.
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3490937"> </a><div class="pSmartList2"><li>In the <b class="cBold">Repository</b> tree view, expand <b class="cBold">Metadata</b> and the file node where you have stored the input schemas and drop the relevant file onto the design workspace.<br />The <b class="cBold">[Components]</b> dialog box displays.</li></div>
</ul></div>
</ul></div>
<a name="wp3490952"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFuzzyJoin.png" id="wp3490948" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3490967"> </a><div class="pSmartList2"><li>Select <b class="cBold">tFileInputDelimited </b>from the list and click <b class="cBold">OK</b> to close the dialog box.<br />The <b class="cBold">tFileInputDelimited</b> component displays in the workspace. The input file used in this scenario is called <em class="cEmphasis">ClientSample</em>. It holds 12 columns including the two columns <em class="cEmphasis">IdCient</em> and <em class="cEmphasis">Email</em> we want to do the fuzzy match on.</li></div>
<a name="wp3490988"> </a><div class="pSmartList2"><li>Do the same for the second input file you want to use as a reference, <em class="cEmphasis">ClientSample_Update </em>in this scenario.</li></div>
<a name="wp3491001"> </a><div class="pSmartList2"><li>Drop the following components from the <b class="cBold">Palette</b> onto the design workspace: <b class="cBold">tFuzzyJoin</b>, <b class="cBold">tFileOutputExcel</b>, and <b class="cBold">tFileOutputDelimited</b>.</li></div>
</ul></div>
</ul></div>
<a name="wp3491024"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFuzzyJoin1.png" id="wp3491020" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3491039"> </a><div class="pSmartList2"><li>Connect the main and reference input files to <b class="cBold">tFuzzyJoin</b> using <b class="cBold">Main</b> links. The link between the reference input file and <b class="cBold">tFuzzyJoin</b> displays as a <em class="cEmphasis">Lookup</em> link on the design workspace.</li></div>
<a name="wp3491068"> </a><div class="pSmartList2"><li>Connect <b class="cBold">tFuzzyJoin</b> to <b class="cBold">tFileOutputExcel</b> using the <b class="cBold">Main</b> link and <b class="cBold">tFuzzyJoin</b> to <b class="cBold">tFileOutputDelimited</b> using the <b class="cBold">Inner join reject</b> link.</li></div>
<a name="wp3491084"> </a><div class="pSmartList2"><li>If needed, double-click the main and reference input files to display their <b class="cBold">Basic settings</b> views. All their property fields are automatically filled in. If you do not define your input files in the Repository, fill in the details manually after selecting <b class="cBold">Built-in</b> in the <b class="cBold">Property Type</b> field.</li></div>
<a name="wp3491108"> </a><div class="pSmartList2"><li>Double click <b class="cBold">tFuzzyJoin</b> to display its <b class="cBold">Basic settings</b> view and define its properties.</li></div>
</ul></div>
</ul></div>
<a name="wp3491117"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFuzzyJoin3.png" id="wp3491113" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3491128"> </a><div class="pSmartList2"><li>Click the <b class="cBold">Edit schema</b> button to open a dialog box that displays the data structure of the input files and then define the data you want to pass to the output components, two columns in this scenario, <em class="cEmphasis">IdClient</em> and <em class="cEmphasis">Email</em>.</li></div>
</ul></div>
</ul></div>
<a name="wp3491147"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFuzzyJoin4.png" id="wp3491143" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3491159"> </a><div class="pSmartList2"><li>Click <b class="cBold">OK</b> to close the dialog box.</li></div>
<a name="wp3491175"> </a><div class="pSmartList2"><li>In the <b class="cBold">Key definition</b> area of the <b class="cBold">Basic settings</b> view of <b class="cBold">tFuzzyJoin</b>, click the plus button to add two columns to the list and then select the input columns and the output columns you want to do the fuzzy matching on from the <b class="cBold">Input key attribute</b> and <b class="cBold">Lookup key attribute</b> lists respectively, <em class="cEmphasis">IdClient</em> and <em class="cEmphasis">Email</em> in this example.</li></div>
<a name="wp3491200"> </a><div class="pSmartList2"><li>Click in the first cell of the <b class="cBold">Matching type</b> column and select from the list the method to be used to check the incoming data against the reference data. In this scenario, <em class="cEmphasis">Levenshtein</em> is the matching type to be used.</li></div>
<a name="wp3491209"> </a><div class="pSmartList2"><li>Then set the minimum and maximum distances. In this method, the distance is the number of character changes (insertion, deletion or substitution) that needs to be carried out in order for the entry to fully match the reference. In this example, we want the minimum distance to be 0 and the maximum distance to be 2. This will output all entries in the <em class="cEmphasis">IdClient</em> that exactly match or that have maximum two character changes.</li></div>
<a name="wp3491223"> </a><p class="pBodyRelative">
<br />
<img src="../Images/bulb_small.png" align="left" id="wp3491220" border="0" hspace="0" vspace="0"/><br />
You can create and store context variables for the minimum and maximum distances in order to start from a low max number to match rows and go up to higher max number to match more possible rows. You can press <b class="cBold">Ctrl+Space</b> to access the variable list and select these new context variables. For more information about context variables, see <em class="cEmphasis">How to centralize contexts and variables</em> in <b class="cBold">Talend Integration Suite Studio</b> <b class="cBold">User Guide</b>.
</p>
<a name="wp3491250"> </a><div class="pSmartList2"><li>Set the matching type for the second column to be checked, <em class="cEmphasis">Metaphone</em> in this example. There is no minimum nor maximum distance to set because this matching method is based on phonetic discrepancies between the input main and reference data.</li></div>
<a name="wp3491259"> </a><div class="pSmartList2"><li>Select the <b class="cBold">Inner join (with reject output)</b> check box to define one of the outputs as inner join reject table.</li></div>
<a name="wp3491272"> </a><div class="pSmartList2"><li>Double click <b class="cBold">tFileOutputExcel</b> to display its <b class="cBold">Basic settings</b> view and define its properties.</li></div>
</ul></div>
</ul></div>
<a name="wp3491283"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFuzzyJoin5.png" id="wp3491279" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3491290"> </a><div class="pSmartList2"><li>Set the destination file name as well as the <span style="font-weight: bold">Sheet name</span> and select the <span style="font-weight: bold">Include header </span>check box.</li></div>
<a name="wp3491303"> </a><div class="pSmartList2"><li> Double click <b class="cBold">tFileOutputDelimited</b> to display its <b class="cBold">Basic settings</b> view and define its properties.</li></div>
</ul></div>
</ul></div>
<a name="wp3491314"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFuzzyJoin6.png" id="wp3491310" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3491321"> </a><div class="pSmartList2"><li>Set the destination file name as well as row and field separators in the corresponding fields and select the <span style="font-weight: bold">Include header </span>check box.</li></div>
<a name="wp3491332"> </a><div class="pSmartList2"><li> Save your Job and click <b class="cBold">F6</b> to execute it.</li></div>
</ul></div>
</ul></div>
<a name="wp3491340"> </a><p class="pIndented1">
The output of the Levenshtein matching type on the <em class="cEmphasis">IdClient</em> column is written in the defined excel file, and the output of the metaphone matching type on the <em class="cEmphasis">Email</em> column is written in the defined delimited file.
</p>
    </blockquote>
    <hr>

    <!--table align="right" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="right"><font size="1">
          <a href="http://www.webworks.com"><img src="images/webworks.gif" width="150" height="20" border="0"></a><br>
            Quadralay Corporation<br>
            http://www.webworks.com<br>
            Voice: (512) 719-3399<br>
            Fax: (512) 719-3606<br>
          <a href="mailto:sales@webworks.com">sales@webworks.com</a><br>
        </font></td>
      </tr>
    </table-->

    <!--table width="220" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tFuzzyJoin_Prop.html"><img id="LongDescNotReq3" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="tFuzzyMatch_Prop.html"><img id="LongDescNotReq4" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->
  </body>
</html>
