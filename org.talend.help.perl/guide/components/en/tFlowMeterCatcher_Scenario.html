<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher Standard Edition 8.0.5337.0">
    <meta name="TEMPLATEBASE" content="Dynamic HTML">
    <meta name="LASTUPDATED" content="10/04/10 19:31:04">
    <title>Scenario: Catching flow metrics from a Job</title>
  </head>

  <body link="#3366CC" vlink="#9999CC" text="#000000" alink="#0000CC" bgcolor="#FFFFFF">

    <!--table width="220" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tFlowMeterCatcher_Prop.html"><img id="LongDescNotReq1" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="tLogCatcher_Prop.html"><img id="LongDescNotReq2" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->

    <!--img src="images/wwplogo.gif" width="122" height="63" alt="Put your logo here!">
    <hr align="left"-->

    <blockquote>
<a name="wp1417343"> </a><div style="color: #000000; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp1419790"> </a><h2 class="pHeading2">
Scenario: Catching flow metrics from a Job
</h2>
<a name="wp1419782"> </a><p class="pIndented1">
The following basic Job aims at catching the number of rows being passed in the flow processed. The measures are taken twice, once after the input component, that is, before the filtering step and once right after the filtering step, that is, before the output component.
</p>
<a name="wp1417353"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFlowMeterCatcher1.png" id="wp1417442" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1418650"> </a><div class="pSmartList2"><li>Drop the following components from the <b class="cBold">Palette</b> to the design workspace: <b class="cBold">tMysqlInput</b>, <b class="cBold">tFlowMeter</b> (x2), <b class="cBold">tMap</b>, <b class="cBold">tLogRow</b>, <b class="cBold">tFlowMeterCatcher</b> and <b class="cBold">tFileOutputCSV</b>.</li></div>
<a name="wp1418672"> </a><div class="pSmartList2"><li>Link components using row main connections and click on the label to give consistent name throughout the Job, such as <em class="cEmphasis">US_States</em> from the input component and <em class="cEmphasis">filtered_states</em> for the output from the <b class="cBold">tMap</b> component, for example.</li></div>
<a name="wp1418688"> </a><div class="pSmartList2"><li>Link the <b class="cBold">tFlowMeterCatcher</b> to the <b class="cBold">tFileOutputCSV</b> component using a row main link also as data is passed.</li></div>
<a name="wp1418698"> </a><div class="pSmartList2"><li>On the <b class="cBold">tMysqlInput</b> Component view, configure the connection properties as <b class="cBold">Repository</b>, if the table metadata are stored in the Repository. Or else, set the Type as <b class="cBold">Built-in</b> and configure manually the connection and schema details if they are built-in for this Job.</li></div>
</ul></div>
</ul></div>
<a name="wp1418347"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFlowMeterCatcher2.png" id="wp1418344" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1418362"> </a><div class="pSmartList2"><li>The <b class="cBold">Schema</b> is simply made of two columns: <em class="cEmphasis">idState</em> and <em class="cEmphasis">LabelState</em>.</li></div>
<a name="wp1418369"> </a><div class="pSmartList2"><li>The <b class="cBold">Query type</b> is Built-in for this Job example.</li></div>
<a name="wp1418375"> </a><div class="pSmartList2"><li>The 50 States of the USA are recorded in the table <em class="cEmphasis">us_states</em>. In order for all 50 entries of the table to get selected, the query to run onto the Mysql database is as follows:<br /><code class="cCode">select * from us_states</code>. </li></div>
<a name="wp1418386"> </a><div class="pSmartList2"><li>Select the relevant <b class="cBold">Encoding type</b> in the list.</li></div>
<a name="wp1418394"> </a><div class="pSmartList2"><li>Then select the following component which is a <b class="cBold">tFlowMeter</b> and set its properties. </li></div>
</ul></div>
</ul></div>
<a name="wp1418558"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFlowMeterCatcher4.png" id="wp1418563" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1418580"> </a><div class="pSmartList2"><li>Select the check box <b class="cBold">Use input connection name as label</b>, in order to reuse the label you chose in the log output file (<b class="cBold">tFileOutputCSV</b>). </li></div>
<a name="wp1418776"> </a><div class="pSmartList2"><li>The mode is <b class="cBold">Absolute</b> as there is no reference flow to meter against, also no <b class="cBold">Threshold</b> is to be set for this example.</li></div>
<a name="wp2944871"> </a><p class="pBodyRelative">
<br />
<img src="../Images/bulb_small.png" align="left" id="wp2944864" border="0" hspace="0" vspace="0"/><br />
The <b class="cBold">Thresholds</b> information is of use within a supervising tool such as <b class="cBold">Talend</b>&#39;s <b class="cBold">Activity Monitoring Console</b> in order to get a proportional representation of the flow process. See <b class="cBold">Activity Monitoring Console</b> <b class="cBold">User guide</b> for more information.
</p>
<a name="wp2944888"> </a><div class="pSmartList2"><li>Then launch the <b class="cBold">tMap</b> editor to set the filtering properties.</li></div>
<a name="wp1418952"> </a><div class="pSmartList2"><li>For this use case, drag and drop the ID and States columns from the Input area of the tMap towards the Output area. No variable is used in this example.</li></div>
</ul></div>
</ul></div>
<a name="wp1418980"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFlowMeterCatcher5.png" id="wp1418988" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1419000"> </a><div class="pSmartList2"><li>On the Output flow area (labelled <em class="cEmphasis">filtered_states</em> in this example), click the arrow &amp; plus button to activate the expression filter field. </li></div>
<a name="wp1419015"> </a><div class="pSmartList2"><li>Drag the <em class="cEmphasis">LabelState</em> column from the Input area (<em class="cEmphasis">row2</em>) towards the expression filter field and type in the rest of the expression in order to filter the state labels starting with the letter <em class="cEmphasis">M</em>. The final expression looks like: <code class="cCode">row2.LabelState.startsWith(&quot;M&quot;)</code> </li></div>
<a name="wp1419109"> </a><div class="pSmartList2"><li>Click <b class="cBold">OK</b> to validate the setting.</li></div>
<a name="wp1419131"> </a><div class="pSmartList2"><li>Then select the second <b class="cBold">tFlowMeter</b> component and set its properties.</li></div>
</ul></div>
</ul></div>
<a name="wp1419153"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFlowMeterCatcher6.png" id="wp1419164" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1419176"> </a><div class="pSmartList2"><li>Select the check box <b class="cBold">Use input connection name as label</b>.</li></div>
<a name="wp1419193"> </a><div class="pSmartList2"><li>Select <b class="cBold">Relative </b>as <b class="cBold">Mode</b> and in the <b class="cBold">Reference connection</b> list, select <em class="cEmphasis">US_States</em> as reference to be measured against.</li></div>
<a name="wp1419241"> </a><div class="pSmartList2"><li>Once again, no threshold is used for this use case.</li></div>
<a name="wp1419258"> </a><div class="pSmartList2"><li>No particular setting is required in the <b class="cBold">tLogRow</b>. </li></div>
<a name="wp1419290"> </a><div class="pSmartList2"><li>Neither does the <b class="cBold">tFlowMeterCatcher</b> as this component&#39;s properties are limited to a preset schema which includes typical log information.</li></div>
<a name="wp1419369"> </a><div class="pSmartList2"><li>So eventually set the log output component (<b class="cBold">tFileOutputCSV</b>).</li></div>
</ul></div>
</ul></div>
<a name="wp1419384"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFlowMeterCatcher8.png" id="wp1419392" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1419410"> </a><div class="pSmartList2"><li>Select the <b class="cBold">Append</b> check box in order to log all <b class="cBold">tFlowMeter</b> measures.</li></div>
<a name="wp1419452"> </a><div class="pSmartList2"><li>Then save your Job and press <b class="cBold">F6</b> to execute it.</li></div>
</ul></div>
</ul></div>
<a name="wp1419460"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFlowMeterCatcher9.png" id="wp1419489" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp1419506"> </a><p class="pIndented1">
The <b class="cBold">Run</b> view shows the filtered state labels as defined in the Job.
</p>
<a name="wp1419509"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFlowMeterCatcher7.png" id="wp1419468" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp1419497"> </a><p class="pIndented1">
In the delimited csv file, the number of rows shown in column <b class="cBold">count</b> varies between <b class="cBold">tFlowMeter1</b> and <b class="cBold">tFlowMeter2</b> as the filtering has then been carried out. The <b class="cBold">reference</b> column shows also this difference.
</p>
    </blockquote>
    <hr>

    <!--table align="right" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="right"><font size="1">
          <a href="http://www.webworks.com"><img src="images/webworks.gif" width="150" height="20" border="0"></a><br>
            Quadralay Corporation<br>
            http://www.webworks.com<br>
            Voice: (512) 719-3399<br>
            Fax: (512) 719-3606<br>
          <a href="mailto:sales@webworks.com">sales@webworks.com</a><br>
        </font></td>
      </tr>
    </table-->

    <!--table width="220" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tFlowMeterCatcher_Prop.html"><img id="LongDescNotReq3" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="tLogCatcher_Prop.html"><img id="LongDescNotReq4" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->
  </body>
</html>
