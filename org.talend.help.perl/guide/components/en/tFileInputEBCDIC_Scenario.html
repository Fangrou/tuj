<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher Standard Edition 8.0.5337.0">
    <meta name="TEMPLATEBASE" content="Dynamic HTML">
    <meta name="LASTUPDATED" content="10/04/10 19:30:40">
    <title>Scenario: Extracting data from an EBCDIC file and populating a database</title>
  </head>

  <body link="#3366CC" vlink="#9999CC" text="#000000" alink="#0000CC" bgcolor="#FFFFFF">

    <!--table width="220" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tFileInputEBCDIC_Prop.html"><img id="LongDescNotReq1" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="tFileInputExcel_Prop.html"><img id="LongDescNotReq2" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->

    <!--img src="images/wwplogo.gif" width="122" height="63" alt="Put your logo here!">
    <hr align="left"-->

    <blockquote>
<a name="wp2759690"> </a><div style="color: #000000; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp2759694"> </a><h2 class="pHeading2">
Scenario: Extracting data from an EBCDIC file and populating a database
</h2>
<a name="wp2188631"> </a><p class="pBodyRelative">
</p>
<div><table border="0" cellpadding="0" cellspacing="0" align="left"><img src="../Images/bulb_small.png" align="left" id="wp2188629" border="0" hspace="0" vspace="0"/></table></div><p class="pBodyRelative">
This scenario uses the<b class="cBold"> [Copybook Connection] </b>wizard that guides users through the different steps necessary to create a Copybook connection and to retrieve the EBCDIC schemas. This wizard is available only for <b class="cBold">Talend Integration Suite </b>users. If you are using <b class="cBold">Talend Open Studio</b> or <b class="cBold">Talend On Demand</b>, you need to set the basic settings for the <b class="cBold">tFileInputEBCDIC</b> component manually. 
</p>
<a name="wp2188808"> </a><p class="pIndented1">
The following scenario is a four-component Job that aims at: reading an EBCDIC file which contains information concerning clients and their financial transactions, extracting and transforming this data, and finally creating two tables in a database, based on the two schemas, clients and transactions, extracted from the original EBCDIC file. 
</p>
<a name="wp2188816"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFileInputEBCDIC1.png" id="wp2188813" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp2188950"> </a><p class="pIndented1">
This Java scenario uses the EBCDIC Connection wizard to set up a connection to the Copybook file and to generate an xc2j file, which allows the retrieval and transformation of the different file schemas. 
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2188956"> </a><div class="pSmartList2"><li>Create a connection to the Copybook file, which describes the structure of your EBCDIC file. In this scenario, the Copybook connection is called EBCDIC. For more information on how to set up a Copybook connection<em class="cEmphasis">Setting up a Copybook connection</em> of <b class="cBold">Talend Integration Suite Studio</b> <b class="cBold">User Guide</b>.</li></div>
<a name="wp2189146"> </a><div class="pSmartList2"><li>Retrieve the file schemas. For more information on how to retrieve schemas from the Copybook file, see <em class="cEmphasis">Step&#160;4: Collecting the schemas</em> of <b class="cBold">Talend Integration Suite Studio</b> <b class="cBold">User Guide</b>.</li></div>
</ul></div>
</ul></div>
<a name="wp2189249"> </a><p class="pIndented1">
Once the Copybook connection has been created and the schemas retrieved, using the EBCDIC and Schema wizards, the new schemas appear under the node <b class="cBold">Metadata</b> &gt; <b class="cBold">Copybook</b>. They are called <em class="cEmphasis">Schema01</em>, <em class="cEmphasis">Schema04</em> and <em class="cEmphasis">Schema05</em>.
</p>
<a name="wp2090492"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFileInputEBCDIC2.png" id="wp2090489" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp2752538"> </a><p class="pIndented1">
In order to retrieve the different file structures and to use them in <b class="cBold">Talend Integration Suite Studio</b>:
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2752546"> </a><div class="pSmartList2"><li>Drop schema 01 from the <b class="cBold">Repository</b> tree view to the design workspace. This automatically creates the <b class="cBold">tFileInputEBCDIC</b> input component.</li></div>
<a name="wp2752559"> </a><div class="pSmartList2"><li>Drop the <b class="cBold">tMysqlOutput</b> component from the <b class="cBold">Palette</b> to the design workspace.</li></div>
<a name="wp2752566"> </a><div class="pSmartList2"><li>Double-click <b class="cBold">tFileInputEBCDIC </b>to display the <b class="cBold">Basic settings</b> view, then define the component properties:</li></div>
</ul></div>
</ul></div>
<a name="wp2752575"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFileInputEBCDIC3.png" id="wp2752572" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp2752590"> </a><p class="pIndented1">
The metadata is automatically defined in the <b class="cBold">Property Type</b>, <b class="cBold">Schema(s)</b>, <b class="cBold">Data file</b> and <b class="cBold">Xc2j file</b> fields. The<b class="cBold"> Property Type</b> field shows which metadata has been used for the component. The <b class="cBold">Schema field</b> shows which schema will be transmitted to the following component. The <b class="cBold">Data file</b> field shows the path to the file that holds the EBCDIC data. The <b class="cBold">Xc2j file</b> field shows the path to the file which enables to extract the schema describing the EBCDIC file structure. If you are in <b class="cBold">Built-In</b> mode, you have to fill these fields manually.
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2751103"> </a><div class="pSmartList2"><li>In the design workspace, right-click <b class="cBold">tFileInputEBCDIC</b>, select <b class="cBold">Row</b> &gt; <b class="cBold">row_Schema01_1</b> from the menu, then click <b class="cBold">tMysqlOutput</b> to connect the components together.</li></div>
<a name="wp2751167"> </a><div class="pSmartList2"><li>Double-click <b class="cBold">tMysqlOutput</b> to display the <b class="cBold">Basic settings</b> view, then define the component properties.</li></div>
</ul></div>
</ul></div>
<a name="wp2191000"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFileInputEBCDIC4.png" id="wp2190997" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2191011"> </a><div class="pSmartList2"><li>In the <b class="cBold">Property Type</b> list, select Repository and click the button <b class="cBold">[...]</b>. Select the database connection you want to use, which is centralized in the metadata of the Repository. The <b class="cBold">Host</b>, <b class="cBold">Port</b>, <b class="cBold">Database</b>, <b class="cBold">Username</b> and <b class="cBold">Password</b> fields are automatically filled. If you are in <b class="cBold">Built-In</b> mode, you have to fill these fields manually.</li></div>
<a name="wp2191033"> </a><div class="pSmartList2"><li>In the <b class="cBold">Table</b> field, enter the name of the table to be created, which will contain the data extracted from the EBCDIC file.</li></div>
<a name="wp2191037"> </a><div class="pSmartList2"><li>In the <b class="cBold">Action on table</b> field, select the option <b class="cBold">Create table</b>.</li></div>
</ul></div>
</ul></div>
<a name="wp2191115"> </a><p class="pIndented1">
At this stage, the Job retrieves the schema <em class="cEmphasis">Schema01</em> from the EBCDIC file and transfers it, as well as the corresponding data, to the database. We now need to retrieve, from the EBCDIC file, the schema 04 and its data, then transform and transmit the data to the same database. To do this:
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2191223"> </a><div class="pSmartList2"><li>Drop the <b class="cBold">tMap</b> and <b class="cBold">tMysqlOutputBulkExec</b> components to the design workspace.</li></div>
<a name="wp2192064"> </a><div class="pSmartList2"><li>Double-click the <b class="cBold">tFileInputEBCDIC</b> to display the <b class="cBold">Basic settings</b> view, then define the component properties.</li></div>
</ul></div>
</ul></div>
<a name="wp2192073"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFileInputEBCDIC5.png" id="wp2192070" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2192086"> </a><div class="pSmartList2"><li>In the <b class="cBold">Schema(s)</b> field, click the plus button to add a line.</li></div>
<a name="wp2751533"> </a><div class="pSmartList2"><li>Click in this line and then click the three-dot button that displays to open a dialog box. Select the <b class="cBold">Create schema from repository</b> button to retrieve the schema defined in the EBCDIC metadata, then select <em class="cEmphasis">Shema04</em> from the drop-down list. </li></div>
<a name="wp2751979"> </a><div class="pSmartList2"><li>Click <b class="cBold">OK</b> to close the dialog box.</li></div>
<a name="wp2192296"> </a><div class="pSmartList2"><li>If you did not retrieve the schema from the <b class="cBold">Repository</b> tree view, select <b class="cBold">Create schema for built-in</b> and manually enter the name and description of your schema.<br />The two schemas <em class="cEmphasis">Shema01</em> and <em class="cEmphasis">Schema04</em> appear in the Schema(s) field of the <b class="cBold">tFileInputEBCDIC</b> component. </li></div>
<a name="wp2752095"> </a><div class="pSmartList2"><li>In order to connect these two components, right-click <b class="cBold">tFileInputEBCDIC</b>, select <b class="cBold">Row</b> &gt; <b class="cBold">row_Schema04_1</b> in the menu and click the<b class="cBold"> tMap</b> component. Then right-click <b class="cBold">tMap</b>, drag a link over to <b class="cBold">tMysqlOutputBulkExec</b> and release the right-click button. In the dialog box that opens up, fill in the name of the <em class="cEmphasis">ebcdic_04</em> output file.</li></div>
<a name="wp2752075"> </a><div class="pSmartList2"><li>Double-click<b class="cBold"> tMap</b> to open up the <b class="cBold">tMap Editor</b>. </li></div>
</ul></div>
</ul></div>
<a name="wp2090788"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFileInputEBCDIC6.png" id="wp2090785" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2192471"> </a><div class="pSmartList2"><li>Select all the columns from the <b class="cBold">row_Schema04_1</b> table and drag them towards the <b class="cBold">ebcdic_04</b> table.</li></div>
<a name="wp2192472"> </a><div class="pSmartList2"><li>In the table <b class="cBold">ebcdic_04</b>, located in the <b class="cBold">Schema editor</b> area at the bottom of the editor, click the <b class="cBold">plus</b> button to add a column to the schema. Name this column <em class="cEmphasis">SUM_AG_NUMBER</em>.</li></div>
<a name="wp2192473"> </a><div class="pSmartList2"><li>In the table <b class="cBold">row_Schema04_1</b>, to the left of the editor, press <b class="cBold">Ctrl</b> and select the <b class="cBold">CC01404_L_11_MENAG_1_1</b> and <b class="cBold">CC01404_AG_CAM_1_1</b> columns. Drag them to the new column <em class="cEmphasis">SUM_AG_NUMBER</em> in table <b class="cBold">ebcdic_04</b>. Add the sign + between the two concatenated columns so that you have: <code class="cCode">row_04_1.CC01404_L_11_MENAG_1_1&#160;+&#160;row_04_1.CC01404_AG_CAM_1_1</code>.</li></div>
<a name="wp2192475"> </a><div class="pSmartList2"><li>Click <b class="cBold">OK</b>. to validate your changes and close the editor.</li></div>
<a name="wp2192476"> </a><div class="pSmartList2"><li>In the design workspace, double-click <b class="cBold">tMysqlOutputBulkExec</b> to display the <b class="cBold">Basic settings</b> view, then define the component properties:</li></div>
</ul></div>
</ul></div>
<a name="wp2090866"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
<img src="../Images/Use_Case_tFileInputEBCDIC7.png" id="wp2090863" border="0" hspace="0" vspace="0"/>
</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2193433"> </a><div class="pSmartList2"><li>In the <b class="cBold">Property Type</b> list, select <b class="cBold">Repository </b>and click the three-dot button to display a dialog bow where you can select the database connection you want to use, which is centralized in the <b class="cBold">Metadata</b> folder of the <b class="cBold">Repository</b> tree view. The <b class="cBold">Host</b>, <b class="cBold">Port</b>, <b class="cBold">Database</b>, <b class="cBold">Username</b> and <b class="cBold">Password</b> fields are automatically filled. If you are in <b class="cBold">Built-In</b> mode, you have to fill these fields manually.</li></div>
<a name="wp2193457"> </a><div class="pSmartList2"><li>In the <b class="cBold">Table</b> field, enter the name of the table to be created, which will contain the data extracted from the EBCDIC file.</li></div>
<a name="wp2193462"> </a><div class="pSmartList2"><li>In the <b class="cBold">Action on table</b> field, select the option <b class="cBold">Create table</b>.</li></div>
<a name="wp2193466"> </a><div class="pSmartList2"><li>Press <b class="cBold">Ctrl+S</b> to save your Job and click the <b class="cBold">Run</b> view. Select the <b class="cBold">Statistics</b> and <b class="cBold">Exec time</b> check boxes, then click <b class="cBold">Run</b> to execute the Job.</li></div>
</ul></div>
</ul></div>
<a name="wp2193490"> </a><p class="pIndented1">
The two tables are created in the database. They contain the structure, as well as the clients and transaction data, from the original EBCDIC file.
</p>
<a name="wp2090947"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Components-07-22-128.jpg" height="227" width="626" id="wp2090941" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
    </blockquote>
    <hr>

    <!--table align="right" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="right"><font size="1">
          <a href="http://www.webworks.com"><img src="images/webworks.gif" width="150" height="20" border="0"></a><br>
            Quadralay Corporation<br>
            http://www.webworks.com<br>
            Voice: (512) 719-3399<br>
            Fax: (512) 719-3606<br>
          <a href="mailto:sales@webworks.com">sales@webworks.com</a><br>
        </font></td>
      </tr>
    </table-->

    <!--table width="220" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tFileInputEBCDIC_Prop.html"><img id="LongDescNotReq3" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="tFileInputExcel_Prop.html"><img id="LongDescNotReq4" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->
  </body>
</html>
