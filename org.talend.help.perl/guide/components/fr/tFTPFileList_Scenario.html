<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher Standard Edition 8.0.5337.0">
    <meta name="TEMPLATEBASE" content="Dynamic HTML">
    <meta name="LASTUPDATED" content="10/04/10 20:04:38">
    <title>Scénario&#160;: Itération sur un répertoire distant </title>
  </head>

  <body link="#3366CC" vlink="#9999CC" text="#000000" alink="#0000CC" bgcolor="#FFFFFF">

    <!--table width="220" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tFTPFileList_Prop.html"><img id="LongDescNotReq1" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="tFTPFileProperties_Prop.html"><img id="LongDescNotReq2" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->

    <!--img src="images/wwplogo.gif" width="122" height="63" alt="Put your logo here!">
    <hr align="left"-->

    <blockquote>
<a name="wp2752198"> </a><div style="color: #000000; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp2752205"> </a><h2 class="pHeading2">
Scénario&#160;: Itération sur un répertoire distant 
</h2>
<a name="wp2752208"> </a><p class="pIndented1">
Le scénario suivant décrit un Job de trois composants qui a pour objectif de se connecter à un serveur FTP, de lister les fichiers d&#39;un répertoire distant donné en fonction d&#39;un masque, de les récupérer et de les envoyer vers un répertoire local défini. 
</p>
<a name="wp2752216"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFTPFileList1.png" id="wp2752213" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2752230"> </a><div class="pSmartList2"><li>Cliquez et déposez les composants suivants&#160;: <b class="cBold">tFTPConnection</b>, <b class="cBold">tFTPFileList</b> et <b class="cBold">tFTPGet</b> dans l&#39;espace de modélisation.</li></div>
<a name="wp2752237"> </a><div class="pSmartList2"><li>Cliquez droit sur le composant <b class="cBold">tFTPConnection</b> et connectez-le au composant <b class="cBold">tFTPFileList</b> via une connexion de type <b class="cBold">OnSubjobOk</b>. Puis connectez le <b class="cBold">tFTPFileList</b> au <b class="cBold">tFTPGet</b> à l&#39;aide d&#39;une connexion de type <b class="cBold">Iterate</b>.</li></div>
<a name="wp2753592"> </a><div class="pSmartList2"><li>Sélectionnez le <b class="cBold">tFTPConnection</b> et cliquez sur l&#39;onglet <b class="cBold">Basic settings</b> de la vue <b class="cBold">Component</b> pour paramétrer le composant&#160;:</li></div>
</ul></div>
</ul></div>
<a name="wp2753604"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFTPFileList2.png" id="wp2753601" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2756203"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Host</b>, renseignez l&#39;adresse IP du serveur FTP.</li></div>
<a name="wp2756210"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Port</b>, renseignez le numéro du port d&#39;écoute.</li></div>
<a name="wp2756219"> </a><div class="pSmartList2"><li>Dans les champs <b class="cBold">Username</b> et <b class="cBold">Password</b>, renseignez respectivement le login et le mot de passe de connexion au serveur distant.</li></div>
<a name="wp2756226"> </a><div class="pSmartList2"><li>Dans la liste <b class="cBold">Connect Mode</b>, sélectionnez le mode de connexion au serveur FTP que vous souhaitez utiliser.</li></div>
<a name="wp2756267"> </a><div class="pSmartList2"><li>Sélectionnez le <b class="cBold">tFTPFileList</b> et cliquez sur l&#39;onglet <b class="cBold">Basic settings</b> de la vue <b class="cBold">Component</b> pour paramétrer le composant&#160;:</li></div>
</ul></div>
</ul></div>
<a name="wp2755278"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tftpFileList3.png" id="wp2755275" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2755346"> </a><div class="pSmartList2"><li>Cochez la case <b class="cBold">Use an existing connection</b> et dans la liste <b class="cBold">Component list</b>, sélectionnez le composant de connexion <b class="cBold">tFTPConnection_1</b>. Les informations de connexion sont automatiquement renseignées.  </li></div>
<a name="wp2755497"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Remote directory</b>, renseignez le chemin relatif du répertoire contenant les fichiers à lister. </li></div>
<a name="wp2755504"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Filemask</b>, indiquez un masque de fichier. Utilisez les caractères spéciaux si besoin est. Dans cet exemple, on ne veut récupérer que les fichiers délimités (<em class="cEmphasis">.csv</em>). </li></div>
<a name="wp2755512"> </a><div class="pSmartList2"><li>Dans la liste <b class="cBold">Connect Mode</b>, sélectionnez le mode de connexion au serveur FTP que vous souhaitez utiliser. Dans cet exemple, il s&#39;agit du mode <b class="cBold">Passive</b>. </li></div>
<a name="wp2755521"> </a><div class="pSmartList2"><li>Sélectionnez le <b class="cBold">tFTPGet</b> et cliquez sur l&#39;onglet <b class="cBold">Basic settings</b> de la vue <b class="cBold">Component</b> pour paramétrer le composant&#160;:</li></div>
</ul></div>
</ul></div>
<a name="wp2755386"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tftpFileList4.png" id="wp2755383" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2755654"> </a><div class="pSmartList2"><li>Cochez la case <b class="cBold">Use an existing connection</b> et dans la liste <b class="cBold">Component list</b>, sélectionnez le composant de connexion adéquat,  <b class="cBold">tFTPConnection_1</b> dans cet exemple. Les informations de connexion sont automatiquement renseignées.  </li></div>
<a name="wp2755667"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Local directory</b>, renseignez le chemin relatif du répertoire de destination des fichiers à récupérer.</li></div>
<a name="wp2755735"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Remote directory</b>, renseignez le chemin relatif du répertoire contenant les fichiers à récupérer. </li></div>
<a name="wp2755689"> </a><div class="pSmartList2"><li>Dans la liste <b class="cBold">Transfer Mode</b>, sélectionnez le mode de transfert FTP que vous souhaitez utiliser. </li></div>
<a name="wp2755810"> </a><div class="pSmartList2"><li>Dans la liste <b class="cBold">Overwrite file</b>, sélectionnez l&#39;une des options disponibles pour le transfert du fichier. </li></div>
<a name="wp2756032"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Filemask</b>, sélectionnez la variable globale <code class="cCode">((String)globalMap.get(&quot;tFTPFileList_1_CURRENT_FILEPATH&quot;))</code> de manière à traiter tous les fichiers du répertoire source.</li></div>
<a name="wp2756045"> </a><div class="pSmartList2"><li>Dans la liste <b class="cBold">Connect Mode</b>, sélectionnez le mode de connexion au serveur FTP que vous souhaitez utiliser. </li></div>
<a name="wp2756158"> </a><div class="pSmartList2"><li>Enregistrez votre Job puis appuyez sur <b class="cBold">F6</b> pour l&#39;exécuter. </li></div>
</ul></div>
</ul></div>
<a name="wp2756054"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFTPFileList5.png" id="wp2756051" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp2756057"> </a><p class="pIndented1">
Une fois la connexion au serveur FTP établie, les fichiers sont listés dans le répertoire spécifié, selon le masque choisi, puis sont récupérés et stockés dans le répertoire de destination préalablement défini. Vous pouvez vérifier que la copie des fichiers a été réalisée à partir de votre explorateur de disque. 
</p>
    </blockquote>
    <hr>

    <!--table align="right" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="right"><font size="1">
          <a href="http://www.webworks.com"><img src="images/webworks.gif" width="150" height="20" border="0"></a><br>
            Quadralay Corporation<br>
            http://www.webworks.com<br>
            Voice: (512) 719-3399<br>
            Fax: (512) 719-3606<br>
          <a href="mailto:sales@webworks.com">sales@webworks.com</a><br>
        </font></td>
      </tr>
    </table-->

    <!--table width="220" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tFTPFileList_Prop.html"><img id="LongDescNotReq3" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="tFTPFileProperties_Prop.html"><img id="LongDescNotReq4" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->
  </body>
</html>
