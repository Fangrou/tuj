<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher Standard Edition 8.0.5337.0">
    <meta name="TEMPLATEBASE" content="Dynamic HTML">
    <meta name="LASTUPDATED" content="10/04/10 20:00:44">
    <title>Scénario&#160;: Supprimer et insérer des données dans une base Oracle</title>
  </head>

  <body link="#3366CC" vlink="#9999CC" text="#000000" alink="#0000CC" bgcolor="#FFFFFF">

    <!--table width="220" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tOracleBulkExec_Prop.html"><img id="LongDescNotReq1" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="tOracleCDC_Prop.html"><img id="LongDescNotReq2" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->

    <!--img src="images/wwplogo.gif" width="122" height="63" alt="Put your logo here!">
    <hr align="left"-->

    <blockquote>
<a name="wp2319266"> </a><div style="color: #000000; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp2319274"> </a><h2 class="pHeading2">
Scénario&#160;: Supprimer et insérer des données dans une base Oracle
</h2>
<a name="wp2319277"> </a><p class="pIndented1">
Ce scénario décrit comment supprimer le contenu d&#39;une base de données Oracle et d&#39;insérer de nouvelles données à partir du contenu d&#39;un fichier d&#39;entrée. Le Job est constitué de trois composants qui créent le contenu, le transfert dans un fichier qui sera ensuite chargé dans la base Oracle après que les données de la table aient été supprimées.
</p>
<a name="wp2319285"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tOracleBulkExec1.png" id="wp2319282" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2319296"> </a><div class="pSmartList2"><li>Cliquez et déposez les composants suivants&#160;: <b class="cBold">tOracleInput</b>, <b class="cBold">tFileOutputDelimited</b>, <b class="cBold">tOracleBulkExec</b>.</li></div>
<a name="wp2319311"> </a><div class="pSmartList2"><li>Connectez le composant <b class="cBold">tOracleInput</b> au <b class="cBold">tFileOutputDelimited</b> à l&#39;aide d&#39;un lien <b class="cBold">Row main</b>.</li></div>
<a name="wp2319326"> </a><div class="pSmartList2"><li>Et connectez le <b class="cBold">tOracleInput</b> au <b class="cBold">tOracleBulkExec</b> à l&#39;aide d&#39;un lien <b class="cBold">OnSubjobOk</b>.</li></div>
<a name="wp2319329"> </a><div class="pSmartList2"><li>Paramétrez les informations de connexion à la base de données Oracle. Nous vous conseillons de stocker ces informations dans une métadonnée du <span style="font-weight: bold">Repository</span> pour pouvoir les réutiliser par la suite dans tous vos Job.</li></div>
</ul></div>
</ul></div>
<a name="wp2319338"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tOracleBulkExec2.png" id="wp2319335" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2319346"> </a><div class="pSmartList2"><li>Paramétrez le schéma, s&#39;il n&#39;est pas conservé dans le <b class="cBold">Repository</b>. Dans cet exemple, le schéma est comme suit&#160;: <em class="cEmphasis">ID_Contract</em>, <em class="cEmphasis">ID_Client</em>, <em class="cEmphasis">Contract_type</em>, <em class="cEmphasis">Contract_Value</em>.</li></div>
<a name="wp2319371"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Encoding</b>, sélectionnez l&#39;option <b class="cBold">Custom</b> et définissez <em class="cEmphasis">AL32UTF8</em> comme encodage.</li></div>
<a name="wp2319381"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Basic settings</b> du composant <b class="cBold">tFileOutputDelimited</b>, paramétrez ses propriétés, notamment les champs <b class="cBold">File Name</b>, <b class="cBold">Row separator</b> et <b class="cBold">Fields separator</b> avec respectivement le chemin d&#39;accès et le nom du fichier, le séparateur de lignes et de champs.</li></div>
<a name="wp2319397"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Encoding</b>, saisissez le même encodage que celui saisi dans les propriétés du composant <b class="cBold">tOracleInput</b>.</li></div>
<a name="wp2723798"> </a><div class="pSmartList2"><li>Double-cliquez ensuite sur le composant <b class="cBold">tOracleBulkExec</b> pour définir les propriétés d&#39;alimentation de la base de données.</li></div>
</ul></div>
</ul></div>
<a name="wp2723807"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tOracleBulkExec3.png" id="wp2723804" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2723812"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Property Type</b>, sélectionnez le mode <b class="cBold">Repository</b> si vous avez stocké les informations de connexion à la base de données sous le noeud <b class="cBold">Metadata</b> du <b class="cBold">Repository</b> ou sélectionnez le mode <b class="cBold">Built-In</b> pour les définir manuellement. Dans ce scénario, on utilise le mode <b class="cBold">Built-In</b>.</li></div>
<a name="wp2723821"> </a><div class="pSmartList2"><li>Définissez si nécessaire les paramètres de connexion dans les champs <b class="cBold">Host</b>, <b class="cBold">Port</b>, <b class="cBold">Database</b>, <b class="cBold">Schema</b>, <b class="cBold">Username</b> et <b class="cBold">Password</b>.</li></div>
<a name="wp2748451"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Table</b>, renseignez le nom de la Table à alimenter et dans le champ <b class="cBold">Action on data</b>, sélectionnez l&#39;action à effectuer, ici&#160;: <b class="cBold">Insert</b></li></div>
<a name="wp2724068"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Schema</b>, sélectionnez le mode <b class="cBold">Built in</b> puis cliquez sur le bouton <b class="cBold">[...]</b> à côté du champ <b class="cBold">Edit Schema </b>pour définir les données à passer au composant suivant.</li></div>
<a name="wp2724501"> </a><div class="pSmartList2"><li>Cliquez sur la vue <b class="cBold">Advanced settings</b> pour configurer les paramètres avancés du composant. </li></div>
</ul></div>
</ul></div>
<a name="wp2726587"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tOracleBulkExec4.png" id="wp2724119" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3581848"> </a><div class="pSmartList2"><li>Cochez la case <b class="cBold">Use an existing control file </b>si vous avez stocké les informations relatives à l&#39;état de la base de données dans un fichier de contrôle (.ctl). Sinon, renseignez si nécessaire les champs suivants manuellement&#160;: <b class="cBold">Record format</b>, <b class="cBold">Specify .ctl file&#39;s INTO TABLE clause manually</b>, <b class="cBold">Field terminated by</b>, <b class="cBold">Use field enclosure</b>, <b class="cBold">Use schema&#39;s Date Pattern to load Date field</b>, <b class="cBold">Specify field condition</b>, <b class="cBold">Preserve blanks</b>, <b class="cBold">Trailing null columns</b>, <b class="cBold">Load options</b>, <b class="cBold">NLS Language</b> et <b class="cBold">Set Parameter NLS_TERRITORY</b> en fonction de votre base de données.</li></div>
<a name="wp3581889"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Encoding Type</b>, paramétrez l&#39;encodage comme dans les étapes précédentes.</li></div>
<a name="wp2724250"> </a><div class="pSmartList2"><li>Et dans le champ <b class="cBold">Output</b>, sélectionnez l&#39;option <b class="cBold">to console</b>, ainsi la sortie standard de la base sera affichée dans la console.</li></div>
</ul></div>
</ul></div>
<a name="wp2724255"> </a><p class="pIndented1">
Appuyez sur <b class="cBold">F6</b> pour exécuter le Job. La sortie de log apparaît dans la vue <b class="cBold">Run</b> et la table est alimentée par les données du fichier paramétré.
</p>
<a name="wp2319472"> </a><p class="pIndented1">
Voir également&#160;: <a href="tMysqlOutputBulkExec_Scenario.html#wp2316901"><em class="cEmphasis">Scénario&#160;: Insérer des données dans une base MySQL</em></a>
</p>
    </blockquote>
    <hr>

    <!--table align="right" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="right"><font size="1">
          <a href="http://www.webworks.com"><img src="images/webworks.gif" width="150" height="20" border="0"></a><br>
            Quadralay Corporation<br>
            http://www.webworks.com<br>
            Voice: (512) 719-3399<br>
            Fax: (512) 719-3606<br>
          <a href="mailto:sales@webworks.com">sales@webworks.com</a><br>
        </font></td>
      </tr>
    </table-->

    <!--table width="220" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tOracleBulkExec_Prop.html"><img id="LongDescNotReq3" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="tOracleCDC_Prop.html"><img id="LongDescNotReq4" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->
  </body>
</html>
